{% extends 'base.html' %}

{% block header %}
    <h2>{% block title %}Analisis de KPIs{% endblock %}</h2>
{% endblock %}

{% block content %}
    <article>
        <header>
            <div>
                <h4>Archivo: {{ file_fetch.name.split('___')[1] }}</h4>
            </div>
        </header>
    </article>

    <form method="POST">

        <label for="start">Fecha de inicio:</label>
        <input type="date" id="start_date" name="start_date" value="{{ oldest_date }}" min="{{ oldest_date }}" max="{{ recent_date }}">

        <label for="start">Fecha de termino:</label>
        <input type="date" id="finish_date" name="finish_date" value="{{ recent_date }}" min="{{ oldest_date }}" max="{{ recent_date }}">

        <input type="submit" value="Analizar">

    </form>

    <div class='row col-ms-12 mx-3 text-center'>
        <h2>Alcance</h2>
        <div class='row col-ms-12 mx-3'>
            <div id='objeto'  style='max-width: 49%; margin-left: 1%;'  class='col-sm-6 mb-2 mt-4 bg-body rounded shadow-sm'>
                <div><span><h4>Tasa de crecimiento de la audiencia</h4><p>(Nuevos seguidores / Total de seguidores) * 100 = {{ growth_rate }} </p></span></div>
                <canvas id="myChart1"></canvas> 
            </div>

            <div id='objeto'  style='max-width: 49%; margin-left: 1%;'  class='col-sm-6 mb-2 mt-4 bg-body rounded shadow-sm'>
                <div><span><h4>Alcance de la publicaci贸n</h4><p>(Vistas de la publicacion / Total de seguidores) * 100 = {{ post_reach }} </p></span></div>
                <canvas id="myChart2"></canvas> 
            </div>  
        </div>

        <h2>Interaccion</h2>
        <div class='row col-ms-12 mx-3'>
            <div id='objeto'  style='max-width: 49%; margin-left: 1%;'  class='col-sm-6 mb-2 mt-4 bg-body rounded shadow-sm'>
                <div><span><h4>Tasa de aplauso</h4><p>(Likes / Seguidores) * 100 = {{ applause_rate }} </p></span></div>
                <canvas id="myChart3"></canvas> 
            </div>
            <div id='objeto'  style='max-width: 49%; margin-left: 1%;'  class='col-sm-6 mb-2 mt-4 bg-body rounded shadow-sm'>
                <div><span><h4>Tasa de interacci贸n promedio</h4><p>(Likes + Comentarios + Compartidas / Total de seguidores) * 100 = {{ avg_engagement_rate }} </p></span></div>
                <canvas id="myChart4"></canvas> 
            </div>
            <div id='objeto'  style='max-width: 49%; margin-left: 1%;'  class='col-sm-6 mb-2 mt-4 bg-body rounded shadow-sm'>
                <div><span><h4>Tasa de amplificaci贸n</h4></span><p>(Compartidas / Total de seguidores) * 100 = {{ amplification_rate }} </p></div>
                <canvas id="myChart5"></canvas> 
            </div>
            <div id='objeto'  style='max-width: 49%; margin-left: 1%;'  class='col-sm-6 mb-2 mt-4 bg-body rounded shadow-sm'>
                <div><span><h4>Tasa de conversi贸n de redes sociales</h4></span><p>(Comentarios / Total de seguidores) * 100 = {{ comment_conversation_rate }} </p></div>
                <canvas id="myChart6"></canvas> 
            </div>
        </div>   
    </div>

    <p class="growth_rate" hidden>{{ growth_rate }}</p>
    <p class="post_reach" hidden>{{ post_reach }}</p>
    <p class="applause_rate" hidden>{{ applause_rate }}</p>
    <p class="avg_engagement_rate" hidden>{{ avg_engagement_rate }}</p>
    <p class="amplification_rate" hidden>{{ amplification_rate }}</p>
    <p class="comment_conversation_rate" hidden>{{ comment_conversation_rate }}</p>

    <script>
        {% include 'kpi/graphic2.js' %}
    </script>
{% endblock %}
